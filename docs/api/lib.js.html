<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 *  Â© 2020, db-developer.
 *  Licensed under the MIT license.
 */
"use strict";

/**
 *  Returns true if value is of type string.
 *
 *  @param    value {any}
 *  @Returns  true, if value is of type string; false otherwise.
 */
function isString( value ) {
  return ( typeof value === 'string' ) || ( value instanceof String );
}

/**
 *  Returns true if value is of type number.
 *
 *  @param    value {any}
 *  @Returns  true, if value is of type number; false otherwise.
 */
function isNumber( value ) {
  return ! isNaN( parseFloat( value )) &amp;&amp; isFinite( value );
}

/**
 *  Load json template by name.
 *
 *  @param  grunt         {object}
 *  @param  taskoptions   {object}
 *  @param  templatename  {string}  name of the template to load.
 */
function getTemplateFromOptions( grunt, taskoptions, templatename ) {
  if ( ! taskoptions.templates ) { return null; }

  let template = taskoptions.templates[ templatename ];
  if ( isString( template )) {
       return grunt.file.readJSON( template );
  }
  else { return template; }
}

/**
 *  Load json template by reference specified in target configuration.
 *
 *  @param  grunt         {object}
 *  @param  taskoptions   {object}
 *  @param  targetconfig  {object}
 */
function getTemplate( grunt, taskoptions, targetconfig ) {
  if ( ! targetconfig.template ) { return { }; }
  if ( isString( targetconfig.template )) {
       let template = getTemplateFromOptions( grunt, taskoptions, targetconfig.template );
       return ( template ) ? template : grunt.file.readJSON( targetconfig.template );
  }
  else { return targetconfig.template; }
}

/**
 *  Merge keys from container into target. Keys which are set to null
 *  within container, will be deleted from target.
 *
 *  Note: This is a "deep-deep" merge.
 *
 *  @param  target    {object} a json object
 *  @param  container {object} a json object which holds key value pairs, which
 *                             are to be merged into target.
 */
function mergeValues( target, container ) {
  Object.keys( container ).forEach( function( key /* , index */) {
    /* istanbul ignore else */
    if (( ! target[ key ]) ||
        ( isString( target[ key ]) || isNumber( target[ key ]) || Array.isArray( target[ key ]))) {
          if ( container[ key ]) { target[ key ] = container[ key ]; }
          else { delete target[ key ]; }
    }
    else if (( target[ key ]) &amp;&amp; ( container[ key ] === null )) { delete target[ key ]; }
    else if (( ! ( target[ key ] instanceof Function )) &amp;&amp; ( ! ( container[ key ] instanceof Function ))) {
          mergeValues( target[ key ], container[ key ]);
    }
  });
}

/**
 *  Called by grunt to create modified json files.
 *
 *  @param grunt        {object}
 *  @param taskconfig   {object} config data for/of task
 *  @param target       {string} name of target currently run
 *  @param targetconfig {object} config data for/of target
 *  @return json {object} for testing purposes only.
 */
function gruntMultiTask( grunt, taskconfig, target, targetconfig ) {

  let jsontemplate = getTemplate( grunt, taskconfig.options, targetconfig );
      jsontemplate = ( targetconfig &amp;&amp; ( targetconfig.set )) ?
                       Object.assign( jsontemplate, targetconfig.set ) : jsontemplate;

  /* istanbul ignore else: not required/nothing to do for else */
  if ( targetconfig &amp;&amp; ( targetconfig.merge )) {
       mergeValues( jsontemplate, targetconfig.merge );
  }

  let destinations = targetconfig.dest || `${ target }.json`;
  if ( ! Array.isArray( destinations )) { destinations = [ destinations ]; }
  destinations.forEach( function( destfile ) {
    grunt.file.write( destfile, JSON.stringify( jsontemplate, null, 2 ));
  });

  // return modified jsontemplate for _testing_ purposes.
  //        this return ist not required by a calling grunt task.
  return jsontemplate;
}

/* eslint-disable */
// Module exports:
Object.defineProperty( module.exports, "isString",               {
       value: isString,               writable: false, enumerable: true, configurable: false });
Object.defineProperty( module.exports, "isNumber",               {
       value: isNumber,               writable: false, enumerable: true, configurable: false });
Object.defineProperty( module.exports, "getTemplateFromOptions", {
       value: getTemplateFromOptions, writable: false, enumerable: true, configurable: false });
Object.defineProperty( module.exports, "getTemplate",            {
       value: getTemplate,            writable: false, enumerable: true, configurable: false });
Object.defineProperty( module.exports, "mergeValues",            {
       value: mergeValues,            writable: false, enumerable: true, configurable: false });
Object.defineProperty( module.exports, "gruntMultiTask",         {
       value: gruntMultiTask,         writable: false, enumerable: true, configurable: false });
/* eslint-enable */
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getTemplate">getTemplate</a></li><li><a href="global.html#getTemplateFromOptions">getTemplateFromOptions</a></li><li><a href="global.html#gruntMultiTask">gruntMultiTask</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#mergeValues">mergeValues</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Mon Jun 01 2020 14:13:03 GMT+0200 (GMT+02:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
